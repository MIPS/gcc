# Copyright (C) 2017 Free Software Foundation, Inc.
#
# This file is part of GCC.
#
# GCC is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3, or (at your option)
# any later version.
#
# GCC is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with GCC; see the file COPYING3.  If not see
# <http://www.gnu.org/licenses/>.

# There is no default build in this multilib setup. This unfortunately
# does not prevent config-ml.in from building a default but this can
# be removed via post install scripts.
#
# All possible MIPS multilibs are shown in this file. They are limited
# via a file that lists required multilibs for each vendor/OS
# combination which can be overridden at build time as well.
#
# The benefit to describing all multilibs is that the compiler driver
# can use any multilib if it is present and therefore additional
# library variants can be added to an installation after initial
# build. This could be achieved by building all libraries and removing
# the ones we don't want to ship but this would massively increase
# build times in situations where only a few are required immediately.

MULTILIB_OPTIONS = mclib=small/mclib=tiny/muclibc mips32r6 mnanomips mabi=p32/mabi=p64 EB/EL msoft-float mno-xlp
MULTILIB_DIRNAMES = small tiny uclibc mips32r6 mips64r6 nanomips p32 p64 eb el sof noxlp
MULTILIB_MATCHES = EL=mel EB=meb

# Allow the exceptions list to be controlled by configure time options
MULTILIB_EXCEPTIONS = $(TM_MULTILIB_EXCEPTIONS_CONFIG)

# Determine if this is a bare metal target with a newlib default library
is_newlib = $(if $(filter elf, $(lastword $(subst -, ,$(target)))),-newlib)

MULTILIB_EXCLUSIONS = !mclib=small/!mclib=tiny/!muclibc/!mips32r6/!mips64r6/!mnanomips/!mabi=p32/!mabi=p64/!EB/!EL/!msoft-float/!mno-xlp

# nanoMIPS32R6 - We will not include any 64 bit nanoMIPS combinations
MULTILIB_REQUIRED   += mips32r6/mnanomips/mabi=p32/EB
MULTILIB_OSDIRNAMES += mips32r6/mnanomips/mabi.p32/EB=!nanomipseb-r6-hard$(is_newlib)/lib
MULTILIB_REQUIRED   += mclib=small/mips32r6/mnanomips/mabi=p32/EB
MULTILIB_OSDIRNAMES += mclib.small/mips32r6/mnanomips/mabi.p32/EB=!nanomipseb-r6-hard-small/lib
MULTILIB_REQUIRED   += mclib=tiny/mips32r6/mnanomips/mabi=p32/EB
MULTILIB_OSDIRNAMES += mclib.tiny/mips32r6/mnanomips/mabi.p32/EB=!nanomipseb-r6-hard-tiny/lib

MULTILIB_REQUIRED   += mips32r6/mnanomips/mabi=p32/EB/msoft-float
MULTILIB_OSDIRNAMES += mips32r6/mnanomips/mabi.p32/EB/msoft-float=!nanomipseb-r6-soft$(is_newlib)/lib
MULTILIB_REQUIRED   += mclib=small/mips32r6/mnanomips/mabi=p32/EB/msoft-float
MULTILIB_OSDIRNAMES += mclib.small/mips32r6/mnanomips/mabi.p32/EB/msoft-float=!nanomipseb-r6-soft-small/lib
MULTILIB_REQUIRED   += mclib=tiny/mips32r6/mnanomips/mabi=p32/EB/msoft-float
MULTILIB_OSDIRNAMES += mclib.tiny/mips32r6/mnanomips/mabi.p32/EB/msoft-float=!nanomipseb-r6-soft-tiny/lib

MULTILIB_REQUIRED   += mips32r6/mnanomips/mabi=p32/EL
MULTILIB_OSDIRNAMES += mips32r6/mnanomips/mabi.p32/EL=!nanomips-r6-hard$(is_newlib)/lib
MULTILIB_REQUIRED   += mclib=small/mips32r6/mnanomips/mabi=p32/EL
MULTILIB_OSDIRNAMES += mclib.small/mips32r6/mnanomips/mabi.p32/EL=!nanomips-r6-hard-small/lib
MULTILIB_REQUIRED   += mclib=tiny/mips32r6/mnanomips/mabi=p32/EL
MULTILIB_OSDIRNAMES += mclib.tiny/mips32r6/mnanomips/mabi.p32/EL=!nanomips-r6-hard-tiny/lib

MULTILIB_REQUIRED   += mips32r6/mnanomips/mabi=p32/EL/msoft-float
MULTILIB_OSDIRNAMES += mips32r6/mnanomips/mabi.p32/EL/msoft-float=!nanomips-r6-soft$(is_newlib)/lib
MULTILIB_REQUIRED   += mips32r6/mnanomips/mabi=p32/EL/msoft-float/mno-xlp
MULTILIB_OSDIRNAMES += mips32r6/mnanomips/mabi.p32/EL/msoft-float/mno-xlp=!nanomips-r6-soft$(is_newlib)-noxlp/lib
MULTILIB_REQUIRED   += mclib=small/mips32r6/mnanomips/mabi=p32/EL/msoft-float
MULTILIB_OSDIRNAMES += mclib.small/mips32r6/mnanomips/mabi.p32/EL/msoft-float=!nanomips-r6-soft-small/lib
MULTILIB_REQUIRED   += mclib=small/mips32r6/mnanomips/mabi=p32/EL/msoft-float/mno-xlp
MULTILIB_OSDIRNAMES += mclib.small/mips32r6/mnanomips/mabi.p32/EL/msoft-float/mno-xlp=!nanomips-r6-soft-small-noxlp/lib
MULTILIB_REQUIRED   += mclib=tiny/mips32r6/mnanomips/mabi=p32/EL/msoft-float
MULTILIB_OSDIRNAMES += mclib.tiny/mips32r6/mnanomips/mabi.p32/EL/msoft-float=!nanomips-r6-soft-tiny/lib
MULTILIB_REQUIRED   += mclib=tiny/mips32r6/mnanomips/mabi=p32/EL/msoft-float/mno-xlp
MULTILIB_OSDIRNAMES += mclib.tiny/mips32r6/mnanomips/mabi.p32/EL/msoft-float/mno-xlp=!nanomips-r6-soft-tiny-noxlp/lib
